# FLAGGY #

## Scripts ##
./resetDB.sh dumps the information from the database, remodels the DB and loads the information back

## Responses ##

Generic Response (generated by `success(msg)` or `error(msg)` in `doppio.api.controllers`):

- `status`: Can be `success` or `error`.
- `msg`: Contains success/error manage. Useful for debugging.

add_user:

- `status`: Only method that, instead of `success` or `error`, returns
  * `0` for failure to add user
  * `1` for successfully adding user
  * `2` for an already existing user
- `u_id`: User ID of newly added user or already existing user
- `last_checkin`: Last checkin of user if user already exists
- `following`: List of people user is following if user already exists

add_follow:
- POST
- inputs: u_id (following) , fb_ed (being followed)

followers:
- POST
- inputs: u_id (return followers of this user)

retrieve_f_request
- POST
- inputs: f_er, f_ed

- `request`: Returns request that was queried, if successful.
  * `p_id`
  * `follower_p_id`
  * `following_p_id`
  * `follower_name`
  * `secure_key`
  * `approve`

unapproved_request():

- `unapproved`: All the unapproved requests.
  * 1 (p_id)
    * `follower_p_id`
    * `follower_name`
    * `secure_key`
    * `following_p_id`
    * `p_id`
    * `approve`

approve_request:
- GET
- input: k (hash), approval (0 for reject, 1 for accept)

update_sensitivity:
- POST
- inputs: sensitivity, u_id

## Emails ##

Create the HTML template of the email in `flaggy/templates/email`. Include the template in the `doppio.api.emails` module. Follow the example.

- `doppio.api.controllers.flaggy_email`:
  * Returns success object if email sent successfully. Error otherwise.
